(function(d){function f(a,c,b,d){if("addEventListener"in a)try{a.addEventListener(c,b,d)}catch(e){if("object"==typeof b&&b.handleEvent)a.addEventListener(c,function(a){b.handleEvent.call(b,a)},d);else throw e;}else"attachEvent"in a&&("object"==typeof b&&b.handleEvent?a.attachEvent("on"+c,function(){b.handleEvent.call(b)}):a.attachEvent("on"+c,b))}function g(a,c,b,d){if("removeEventListener"in a)try{a.removeEventListener(c,b,d)}catch(e){if("object"==typeof b&&b.handleEvent)a.removeEventListener(c,
function(a){b.handleEvent.call(b,a)},d);else throw e;}else"detachEvent"in a&&("object"==typeof b&&b.handleEvent?a.detachEvent("on"+c,function(){b.handleEvent.call(b)}):a.detachEvent("on"+c,b))}window.MBP=window.MBP||{};MBP.viewportmeta=d.querySelector&&d.querySelector('meta[name="viewport"]');MBP.ua=navigator.userAgent;MBP.scaleFix=function(){MBP.viewportmeta&&/iPhone|iPad|iPod/.test(MBP.ua)&&!/Opera Mini/.test(MBP.ua)&&(MBP.viewportmeta.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0",
d.addEventListener("gesturestart",MBP.gestureStart,!1))};MBP.gestureStart=function(){MBP.viewportmeta.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"};MBP.BODY_SCROLL_TOP=!1;MBP.getScrollTop=function(){return window.pageYOffset||"CSS1Compat"===d.compatMode&&d.documentElement.scrollTop||d.body.scrollTop||0};MBP.hideUrlBar=function(){var a=window;location.hash||!1===MBP.BODY_SCROLL_TOP||a.scrollTo(0,1===MBP.BODY_SCROLL_TOP?0:1)};MBP.hideUrlBarOnLoad=function(){var a=window,c=a.document;
!location.hash&&a.addEventListener&&(window.scrollTo(0,1),MBP.BODY_SCROLL_TOP=1,bodycheck=setInterval(function(){c.body&&(clearInterval(bodycheck),MBP.BODY_SCROLL_TOP=MBP.getScrollTop(),MBP.hideUrlBar())},15),a.addEventListener("load",function(){setTimeout(function(){20>MBP.getScrollTop()&&MBP.hideUrlBar()},0)}))};MBP.fastButton=function(a,c){this.element=a;this.handler=c;f(a,"touchstart",this,!1);f(a,"click",this,!1)};MBP.fastButton.prototype.handleEvent=function(a){a=a||window.event;switch(a.type){case "touchstart":this.onTouchStart(a);
break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onClick(a);break;case "click":this.onClick(a)}};MBP.fastButton.prototype.onTouchStart=function(a){a.stopPropagation();this.element.addEventListener("touchend",this,!1);d.body.addEventListener("touchmove",this,!1);this.startX=a.touches[0].clientX;this.startY=a.touches[0].clientY;this.element.style.backgroundColor="rgba(0,0,0,.7)"};MBP.fastButton.prototype.onTouchMove=function(a){(10<Math.abs(a.touches[0].clientX-this.startX)||10<
Math.abs(a.touches[0].clientY-this.startY))&&this.reset()};MBP.fastButton.prototype.onClick=function(a){a=a||window.event;a.stopPropagation&&a.stopPropagation();this.reset();this.handler(a);"touchend"==a.type&&MBP.preventGhostClick(this.startX,this.startY);this.element.style.backgroundColor=""};MBP.fastButton.prototype.reset=function(){g(this.element,"touchend",this,!1);g(d.body,"touchmove",this,!1);this.element.style.backgroundColor=""};MBP.preventGhostClick=function(a,c){MBP.coords.push(a,c);window.setTimeout(function(){MBP.coords.splice(0,
2)},2500)};MBP.ghostClickHandler=function(a){if(!MBP.hadTouchEvent&&"ontouchstart"in window)a.stopPropagation(),a.preventDefault();else for(var c=0,b=MBP.coords.length;c<b;c+=2){var d=MBP.coords[c+1];25>Math.abs(a.clientX-MBP.coords[c])&&25>Math.abs(a.clientY-d)&&(a.stopPropagation(),a.preventDefault())}};d.addEventListener&&d.addEventListener("click",MBP.ghostClickHandler,!0);f(d.documentElement,"touchstart",function(){MBP.hadTouchEvent=!0},!1);MBP.coords=[];MBP.splash=function(){d.write('<link rel="apple-touch-startup-image" href="/img/'+
("iPad"===navigator.platform?"h/":"l/")+'splash.png" />')};MBP.autogrow=function(a,c){function b(a){a=this.scrollHeight;a>this.clientHeight&&(this.style.height=a+3*e+"px")}var d=c?c:12,e=a.currentStyle?a.currentStyle.lineHeight:getComputedStyle(a,null).lineHeight,e=-1==e.indexOf("px")?d:parseInt(e,10);a.style.overflow="hidden";a.addEventListener?a.addEventListener("keyup",b,!1):a.attachEvent("onkeyup",b)};MBP.enableActive=function(){d.addEventListener("touchstart",function(){},!1)};MBP.viewportMeta=
$('meta[name="viewport"]');MBP.preventZoom=function(){$("input, select, textarea").bind("focus blur",function(a){MBP.viewportMeta.attr("content","width=device-width,initial-scale=1,maximum-scale="+("blur"==a.type?10:1))})}})(document);
